<?xml version="1.0" encoding="utf-8"?>
<odoo>
    ,<data>
    <template id="dc_second_quotation_act">
        <t t-call="web.external_layout">
            <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)" />
            <div class="page">
                <style>
                    table.no-table-border tr,table.no-table-border tr td { border: 0px !important; }
                    table.final-product-table tr,table.final-product-table tr td,table.final-product-table tr th { border-color: black !important;border-top: 0px !important; }
                    table.final-product-table thead tr, table.final-product-table thead tr th { border-bottom: 1px !important; }
                    table.final-product-table tbody tr, table.final-product-table tbody tr td { border-bottom:4px solid #c0c0c0 !important }
                    table.final-product-table tbody tr:last-child, table.final-product-table tbody tr:last-child td { border-bottom:1px solid black !important }
                    table.final-product-table tbody tr:first-child, table.final-product-table tbody tr:first-child td { border-top:1px solid black !important }
                    table.final-product-table tbody tr td, table.final-product-table thead tr th { border-right: 1px solid black !important }
                    table.final-product-table tbody tr td:last-child, table.final-product-table thead tr th:last-child { border-right: 0px !important }
                </style>
                <div class="row" style="border:2px solid #000;border-radius:15px;padding-top:10px;padding-bottom:10px;margin-bottom:7px">
                    <div class="col-6">
                        <table class="table table-sm no-table-border">
                            <tr>
                                <td style="width:150px">Company Name</td>
                                <td>
                                    <t t-if="doc.partner_id.parent_id"><t t-esc="doc.partner_id.parent_id.name" /></t>
                                    <t t-else=""><t t-esc="doc.partner_id.name" /></t>
                                </td>
                            </tr>
                            <tr>
                                <td style="height:70px;width:150px">Address</td>
                                <td style="height:70px">
                                    <address t-field="doc.partner_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}' />
                                </td>
                            </tr>
                            <tr>
                                <td style="width:170px">Attn</td>
                                <td><t t-if="doc.partner_id.parent_id"><t t-esc="doc.partner_id.name" /></t></td>
                            </tr>
                            <tr>
                                <td style="width:170px">Contact Details</td>
                                <td><t t-esc="doc.partner_id.phone" /></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-6">
                        <table class="table table-sm no-table-border" style="">
                            <tr>
                                <td style="width:170px"><strong>Reference No.</strong></td>
                                <td><t t-esc="doc.name" /></td>
                            </tr>
                            <tr>
                                <td style="width:170px">Date</td>
                                <td><t t-esc="doc.date_order" /></td>
                            </tr>
                            <tr>
                                <td style="width:170px">Salesman</td>
                                <td><t t-esc="doc.user_id.name" /></td>
                            </tr>
                            <tr>
                                <td style="width:170px">Salesman Contact</td>
                                <td><t t-esc="doc.user_id.email" /></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <t t-if="doc.quotation_subject">
                <div class="col-12 text-center">
                    Sub: <t t-esc="doc.quotation_subject" />
                </div><br />
                </t>
                <div class="col-12">
                    <p>Dear Sir/Madam</p>
                    <p>Please fnd below the quote for the mentoned item.</p>
                </div>
                <div class="row">
                    <div class="col-12" style="border:2px solid #000;border-radius:15px;padding:0px 5px !important">
                    <t t-set="total_final_cost" t-value="0" />
                    <table class="table table-sm final-product-table">
                        <thead>
                            <tr>
                                <th style="width:500px;border-bottom" class="text-center">Description</th>
                                <th class="text-center">Qty</th>
                                <th class="text-center">Unit</th>
                                <th class="text-center">Unit Price</th>
                                <th class="text-center">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="counter" t-value="0" />
                            <tr t-foreach="doc.scope_work" t-as="simp_lines">
                                <t t-set="unit_price" t-value="simp_lines.total_cost/simp_lines.total_qty" />
                                <td style="width:500px" class="text-center"><span t-esc="simp_lines.desc" /></td>
                                <td class="text-center"><span t-esc="simp_lines.total_qty" /></td>
                                <td class="text-center"><span t-esc="simp_lines.product_id.uom_id.name" /></td>
                                <td class="text-center"><t t-esc="'%.2f'%(unit_price)" /></td>
                                <td class="text-center"><span t-esc="simp_lines.total_cost" /></td>
                                <t t-set="counter" t-value="counter+1" />
                                <t t-set="total_final_cost" t-value="total_final_cost+simp_lines.total_cost" />
                            </tr>
                            <t t-if="counter&#60;9">
                            <tr t-foreach="range(counter, 9)" t-as="l">
                                <td style="width:530px;height: 25px;"></td>
                                <td style="height: 25px;"></td>
                                <td style="height: 25px;"></td>
                                <td style="height: 25px;"></td>
                                <td style="height: 25px;"></td>
                            </tr>
                            </t>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3" rowspan="2">
                                    <br />
                                    <table style="width:100%;border:0px !important">
                                        <tr style="border:0px !important">
                                            <td style="width:130px;border:0px !important">Payment Terms</td>
                                            <td style="border:0px !important">
                                                <span t-esc="doc.note" />
                                            </td>
                                        </tr>
                                        <tr style="border:0px !important">
                                            <td style="width:130px;border:0px !important">Validity</td>
                                            <td style="border:0px !important">
                                                <span>Ofer Valid for <t t-esc="doc.validity_days" /> Days</span></td>
                                        </tr>
                                        <tr style="border:0px !important">
                                            <td style="width:130px;border:0px !important">Delivery</td>
                                            <td style="border:0px !important">
                                                <span t-esc="doc.delivery" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td colspan="2" class="text-center" style="border-left:1px solid black !important;border-bottom:1px solid black !important">
                                    <span style="display:block;height:35px;" class="text-center">VAT: 5%</span>
                                    <span style="display:block;height:35px;" class="text-center">Total Excl VAT: <t t-esc="total_final_cost" /></span>
                                    <t t-set="total_incl_vat" t-value="total_final_cost*(5/100)" />
                                    <span style="display:block;height:35px;" class="text-center">Total Incl VAT: <t t-esc="total_final_cost+total_incl_vat" /></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2" class="text-center" style="border-left:1px solid black !important">
                                    <br /><br />
                                    <p>CLIENT'S APPROVAL</p>
                                    <span style="display:block;height:30px;width:80%;border-bottom:1px solid black;margin-left:17px" />
                                    <p>Signature</p>
                                    <p>Date <span style="float:right;height:20px;display:block;width:75%;border-bottom:1px solid black" /></p>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="dc_second_quotation">
        <t t-call="web.html_container">
            <div class="header">
                <div class="row">
                    <div class="col-4">
                        <img src="/dc_quotation_second/static/src/img/logo-actual.png" alt="Logo" style="max-height:130px"/>
                    </div>
                    <div class="col-4" />
                    <div class="col-4 text-right mb4">
                        <t t-if="docs.state=='draft'"><h1 style="padding-top:80px"><strong>Quotation</strong></h1></t>
                        <t t-if="docs.state=='sent'"><h1 style="padding-top:80px"><strong>Quotation</strong></h1></t>
                        <t t-if="docs.state=='sale'"><h1 style="padding-top:80px"><strong>Sales Order</strong></h1></t>
                        <t t-if="docs.state=='done'"><h1 style="padding-top:80px"><strong>Sales Order</strong></h1></t>
                    </div>
                </div>
            </div>
            <t t-foreach="docs" t-as="doc">
                <t t-call="dc_quotation_second.dc_second_quotation_act" t-lang="doc.partner_id.lang" />
            </t>
        </t>
    </template>

    <report
        id="dc_quotation_report_reg"
        model="sale.order"
        string="DC Quotation Full"
        report_type="qweb-pdf"
        name="dc_quotation_second.dc_second_quotation"
        file="dc_quotation_second.dc_second_quotation"
        />
    </data>
</odoo>